<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>North Sea 3 Species Model • mizerEcopath</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="North%20Sea%203%20spp%20Model_files/libs/quarto-html/popper.min.js"></script><script src="North%20Sea%203%20spp%20Model_files/libs/quarto-html/tippy.umd.min.js"></script><link href="North%20Sea%203%20spp%20Model_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="North%20Sea%203%20spp%20Model_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="North Sea 3 Species Model">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mizerEcopath</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9014</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/mizerEcopath.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Celtic%20Sea%20Model.html">Celtic Sea Model</a></li>
    <li><a class="dropdown-item" href="../articles/diffusion.html">Incorporating predation diffusion</a></li>
    <li><a class="dropdown-item" href="../articles/ecopath_to_mizer.html">From Ecopath to Mizer</a></li>
    <li><a class="dropdown-item" href="../articles/North%20Sea%203%20spp%20Model.html">North Sea 3 Species Model</a></li>
    <li><a class="dropdown-item" href="../articles/todo.html">Todo list</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gustavdelius/mizerEcopath/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>North Sea 3 Species Model</h1>




      <small class="dont-index">Source: <a href="https://github.com/gustavdelius/mizerEcopath/blob/HEAD/vignettes/North%20Sea%203%20spp%20Model.qmd" class="external-link"><code>vignettes/North Sea 3 spp Model.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <section class="section level2"><h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Creating a simplified 3 species North Sea model.</p>
<section class="level2"><h3 id="loading-in-repository-and-libraries">Loading in Repository and Libraries<a class="anchor" aria-label="anchor" href="#loading-in-repository-and-libraries"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/gustavdelius/mizerEcopath" class="external-link">mizerEcopath</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="level2"><h3 id="choosing-species">Choosing Species<a class="anchor" aria-label="anchor" href="#choosing-species"></a>
</h3>
<p>In this example the species modelled include Saithe (<em>Pollachius virens)</em>, Herring (<em>Clupea harengus</em>), and Dab (<em>Limanda limanda</em>), in an attempt to create a simple model with the selected species occupying a variety of niches (ie: one large piscivorous fish (saithe), one small pelagic fish (herring), and one benthic fish species (dab)).</p>
<p>You will need to create a table with some species-specific parameters, such as von Bertalanffy growth parameters, length-weight parameters, and maturity parameters. These can be taken from FishBase or other sources. The species parameters data frame should include the following columns:</p>
<ul>
<li>
<code>species</code>: Common name of the species</li>
<li>
<code>SciName</code>: Scientific name of the species</li>
<li>
<code>l_inf</code> or <code>w_inf</code>: von Bertalanffy asymptotic length (cm) or weight (g)</li>
<li>
<code>k_vb</code>: von Bertalanffy growth rate (1/year)</li>
<li>
<code>t0</code>: von Bertalanffy age zero (years)</li>
<li>
<code>l_mat</code> or <code>w_mat</code>: Length (cm) or weight (g) at 50% maturity</li>
<li>
<code>a</code>: Length-weight relationship parameter a</li>
<li>
<code>b</code>: Length-weight relationship parameter b</li>
</ul>
<p>For our example we have collected the information for the three species we are modelling in a csv file called <code>North Sea 3 spp params.csv</code> which is included in the <code>inst/extdata</code> folder of the mizerEcopath package. Let’s load it in and have a peek:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst"</span>, <span class="st">"extdata"</span>, <span class="st">"ns_3_spp_species_params.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">sp</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  species l_inf  k_vb    t0 l_mat       a    b   scientific_name
1  Saithe 101.0 0.196    NA  69.0 0.00661 3.07 Pollachius virens
2 Herring  35.9 0.348 -0.45  24.1 0.00550 3.10   Clupea harengus
3     Dab  33.0 0.210 -0.89  13.0 0.00776 3.09   Limanda limanda
                                                                        Fishbase.Link
1  https://www.fishbase.se/popdyn/FishPopGrowthSummary.php?fc=183&amp;vautoctr=9422&amp;cap=n
2  https://www.fishbase.se/popdyn/FishPopGrowthSummary.php?fc=43&amp;vautoctr=11740&amp;cap=n
3 https://www.fishbase.se/popdyn/FishPopGrowthSummary.php?fc=440&amp;vautoctr=11735&amp;cap=n
  Ref..     Sex  M phi_prime                                       Locality
1 74354 Unsexed NA      3.30                    Faroe Bank, 60°55´N; 8°40´W
2 94462   Mixed NA      2.65 North Sea Sub-area IV, Divisions VIId and IIIa
3 94462   Mixed NA      2.36                         North Sea, Sub-area IV
   Territory Temp
1 Faeroe Is.   NA
2       &lt;NA&gt;   NA
3       &lt;NA&gt;   NA</code></pre>
</div>
</div>
<p>We included many columns that mizer will not use but that will be nice for us to keep track of.</p>
</section><section class="level2"><h3 id="load-in-data">Load in Data<a class="anchor" aria-label="anchor" href="#load-in-data"></a>
</h3>
<p>Load in the accompanying .csv files exported from Ecopath. This data includes species parameters, diet data and total catch data. TODO: more info about which Ecopath model we used.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Load in ecopath parameters</span></span>
<span><span class="va">ecopath_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst"</span>, <span class="st">"extdata"</span>,</span>
<span>                                <span class="st">"North Sea-Basic estimates.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ecopath_diet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst"</span>, <span class="st">"extdata"</span>,</span>
<span>                              <span class="st">"North Sea-Diet composition.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ecopath_catch</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst"</span>, <span class="st">"extdata"</span>,</span>
<span>                              <span class="st">"North Sea-Landings.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<p>We have extracted the size distribution of the landings data for the three species from STECF data. TODO: more info on this table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Load in catch data</span></span>
<span><span class="va">catch</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst"</span>, <span class="st">"extdata"</span>, <span class="st">"ns_3_spp_catch.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># temporarily we still need to duplicate the `count` column to `catch</span></span>
<span><span class="va">catch</span><span class="op">$</span><span class="va">catch</span> <span class="op">&lt;-</span> <span class="va">catch</span><span class="op">$</span><span class="va">count</span></span></code></pre></div>
</div>
</section><section class="level2"><h3 id="set-l_max-based-on-observed-sizes-in-the-landings-data">Set l_max based on observed sizes in the landings data<a class="anchor" aria-label="anchor" href="#set-l_max-based-on-observed-sizes-in-the-landings-data"></a>
</h3>
<p>The <code>l_max</code> species parameter lets mizer know up to what size it needs to calculate species abundances. By setting it not too much larger than the largest observed size in the landings data, we can reduce the computational burden of the model and also choose the scale of the size axis in plots appropriately. We set <code>l_max</code> to 5% above the maximum observed weight in the landings data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sp</span> <span class="op">&lt;-</span> <span class="va">catch</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>l_max <span class="op">=</span> <span class="fl">1.05</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">length</span> <span class="op">+</span> <span class="va">dl</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">right_join</a></span><span class="op">(</span><span class="va">sp</span>, by <span class="op">=</span> <span class="st">"species"</span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="level2"><h3 id="dictionary-between-species-and-ecopath-groups">Dictionary Between Species and Ecopath Groups<a class="anchor" aria-label="anchor" href="#dictionary-between-species-and-ecopath-groups"></a>
</h3>
<p>Add the Ecopath species parameters including biomass (B) in tonnes per km², consumption per biomass (Q/B), and production per consumption (P/Q). These are passed to the function [addEcopathParams()] (add link to help page) which computes production per unit of biomass (P/B) internally from these estimates and stores these values in new columns in the species params data frame. These following columns are added to the species parameters data frame: biomass_observed, consumption_observed, production_observed, and ecopath_groups.</p>
<p><em>Note: This is not the same as matching full interspecific interactions — we’re importing only the overall species-level empirical rates, not species to species rates which are properties which only emerge once diets and predation kernels are specified.</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Create a dictionary between ecopath data frame and sp</span></span>
<span><span class="va">species_to_groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"Herring"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Herring (juvenile 0, 1)"</span>, <span class="st">"Herring (adult)"</span><span class="op">)</span>,</span>
<span>    <span class="st">"Dab"</span>     <span class="op">=</span> <span class="st">"Dab"</span>,</span>
<span>    <span class="st">"Saithe"</span>  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Juvenile Saithe (0-3, 0-40cm)"</span>, <span class="st">"Saithe (adult)"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># add biomass, production, and consumption to species parameters</span></span>
<span><span class="va">sp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addEcopathParams.html">addEcopathParams</a></span><span class="op">(</span><span class="va">sp</span>, <span class="va">ecopath_params</span>, <span class="va">species_to_groups</span><span class="op">)</span></span></code></pre></div>
</div>
</section></section><section class="section level2"><h2 id="initial-model">Initial Model<a class="anchor" aria-label="anchor" href="#initial-model"></a>
</h2>
<section class="level2"><h3 id="create-model">Create Model<a class="anchor" aria-label="anchor" href="#create-model"></a>
</h3>
<p>Use newAllometric Params to create a model</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newAllometricParams.html">newAllometricParams</a></span><span class="op">(</span><span class="va">sp</span>, no_w <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="level2"><h3 id="add-total-fishing-mortality">Add Total Fishing Mortality<a class="anchor" aria-label="anchor" href="#add-total-fishing-mortality"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addEcopathCatchTotal.html">addEcopathCatchTotal</a></span><span class="op">(</span><span class="va">p</span>, <span class="va">ecopath_catch</span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="level2"><h3 id="adjust-diet-matrix">Adjust Diet Matrix<a class="anchor" aria-label="anchor" href="#adjust-diet-matrix"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reduceEcopathDiet.html">reduceEcopathDiet</a></span><span class="op">(</span><span class="va">sp</span>, <span class="va">ecopath_diet</span>, <span class="va">ecopath_params</span><span class="op">)</span></span>
<span><span class="co">#saveRDS(dm, "inst/extdata/ns_3_spp_model_adjusted_diet_matrix.rds")</span></span></code></pre></div>
</div>
</section><section class="level2"><h3 id="match-model-to-observations">Match Model to Observations<a class="anchor" aria-label="anchor" href="#match-model-to-observations"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://sizespectrum.org/mizer/reference/matchGrowth.html" class="external-link">matchGrowth</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span><span class="fu">mizerEcopath</span><span class="fu">::</span><span class="fu"><a href="../reference/steadySingleSpecies.html">steadySingleSpecies</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span><span class="fu"><a href="https://sizespectrum.org/mizer/reference/matchBiomasses.html" class="external-link">matchBiomasses</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in setBevertonHolt(params): For the following species `erepro` has been increased to the smallest possible value: erepro[Dab] = 0.00307; erepro[Herring] = 0.00249; erepro[Saithe] = 0.000445</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in setBevertonHolt(params): For the following species `erepro` has been increased to the smallest possible value: erepro[Dab] = 0.00308; erepro[Herring] = 0.00497; erepro[Saithe] = 0.00118</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/matchCatch.html">matchCatch</a></span><span class="op">(</span>catch <span class="op">=</span> <span class="va">catch</span>, yield_lambda <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> </span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in setBevertonHolt(params): For the following species `erepro` has been increased to the smallest possible value: erepro[Saithe] = 0.00819</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#odd warning at match catch</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op">|&gt;</span><span class="fu"><a href="../reference/matchConsumption.html">matchConsumption</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ns_3_spp_model_initial</span> <span class="op">&lt;-</span> <span class="va">p</span></span>
<span><span class="co">#use_data(ns_3_spp_model_initial)</span></span></code></pre></div>
</div>
</section><section class="level2"><h3 id="manual-tuning">Manual Tuning<a class="anchor" aria-label="anchor" href="#manual-tuning"></a>
</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_tuned</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tuneEcopath.html">tuneEcopath</a></span><span class="op">(</span></span>
<span>    <span class="va">p</span>, </span>
<span>    catch <span class="op">=</span> <span class="va">catch</span>, </span>
<span>    diet <span class="op">=</span> <span class="va">dm</span>,</span>
<span>    preserve <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"reproduction_level"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</section></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gustav Delius.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
