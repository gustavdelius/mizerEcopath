<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get diffusion rate — getDiffusion • mizerEcopath</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get diffusion rate — getDiffusion"><meta name="description" content="The diffusion rate \(d_i(w)\) for species \(i\)
and weight \(w\) has contributions from the encounter of
fish prey and of resource. This is determined by summing over all prey
species and the resource spectrum and then integrating over all prey sizes
\(w_p\), weighted by predation kernel \(\phi(w,w_p)\):
$$
d_i(w) = (1-f_i(w))(\alpha_i(1-\psi_i(w)))^2\gamma_i(w) \int
\left( \theta_{ip} N_R(w_p) + \sum_{j} \theta_{ij} N_j(w_p) \right)
\phi_i(w,w_p) w_p^2 \, dw_p.
$$
Here \(N_j(w)\) is the abundance density of species \(j\) and
\(N_R(w)\) is the abundance density of resource.
The overall prefactor \(\gamma_i(w)\) determines the predation power of the
predator. It could be interpreted as a search volume and is set with the
mizer::setSearchVolume() function. The predation kernel
\(\phi(w,w_p)\) is set with the mizer::setPredKernel() function. The
species interaction matrix \(\theta_{ij}\) is set with mizer::setInteraction()
and the resource interaction vector \(\theta_{ip}\) is taken from the
interaction_resource column in params@species_params.
\(f(w)\) is the feeding level calculated with
mizer::getFeedingLevel(). \(\psi(w)\) is the proportion of the available energy
that is invested in reproduction instead of growth, as stored in params@psi."><meta property="og:description" content="The diffusion rate \(d_i(w)\) for species \(i\)
and weight \(w\) has contributions from the encounter of
fish prey and of resource. This is determined by summing over all prey
species and the resource spectrum and then integrating over all prey sizes
\(w_p\), weighted by predation kernel \(\phi(w,w_p)\):
$$
d_i(w) = (1-f_i(w))(\alpha_i(1-\psi_i(w)))^2\gamma_i(w) \int
\left( \theta_{ip} N_R(w_p) + \sum_{j} \theta_{ij} N_j(w_p) \right)
\phi_i(w,w_p) w_p^2 \, dw_p.
$$
Here \(N_j(w)\) is the abundance density of species \(j\) and
\(N_R(w)\) is the abundance density of resource.
The overall prefactor \(\gamma_i(w)\) determines the predation power of the
predator. It could be interpreted as a search volume and is set with the
mizer::setSearchVolume() function. The predation kernel
\(\phi(w,w_p)\) is set with the mizer::setPredKernel() function. The
species interaction matrix \(\theta_{ij}\) is set with mizer::setInteraction()
and the resource interaction vector \(\theta_{ip}\) is taken from the
interaction_resource column in params@species_params.
\(f(w)\) is the feeding level calculated with
mizer::getFeedingLevel(). \(\psi(w)\) is the proportion of the available energy
that is invested in reproduction instead of growth, as stored in params@psi."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mizerEcopath</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9014</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/mizerEcopath.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Celtic%20Sea%20Model.html">Celtic Sea Model</a></li>
    <li><a class="dropdown-item" href="../articles/diffusion.html">Incorporating predation diffusion</a></li>
    <li><a class="dropdown-item" href="../articles/ecopath_to_mizer.html">From Ecopath to Mizer</a></li>
    <li><a class="dropdown-item" href="../articles/North%20Sea%203%20spp%20Model.html">North Sea 3 Species Model</a></li>
    <li><a class="dropdown-item" href="../articles/todo.html">Todo list</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gustavdelius/mizerEcopath/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get diffusion rate</h1>
      <small class="dont-index">Source: <a href="https://github.com/gustavdelius/mizerEcopath/blob/HEAD/R/getDiffusion.R" class="external-link"><code>R/getDiffusion.R</code></a></small>
      <div class="d-none name"><code>getDiffusion.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The diffusion rate \(d_i(w)\) for species \(i\)
and weight \(w\) has contributions from the encounter of
fish prey and of resource. This is determined by summing over all prey
species and the resource spectrum and then integrating over all prey sizes
\(w_p\), weighted by predation kernel \(\phi(w,w_p)\):
$$
d_i(w) = (1-f_i(w))(\alpha_i(1-\psi_i(w)))^2\gamma_i(w) \int
\left( \theta_{ip} N_R(w_p) + \sum_{j} \theta_{ij} N_j(w_p) \right)
\phi_i(w,w_p) w_p^2 \, dw_p.
$$
Here \(N_j(w)\) is the abundance density of species \(j\) and
\(N_R(w)\) is the abundance density of resource.
The overall prefactor \(\gamma_i(w)\) determines the predation power of the
predator. It could be interpreted as a search volume and is set with the
<code><a href="https://sizespectrum.org/mizer/reference/setSearchVolume.html" class="external-link">mizer::setSearchVolume()</a></code> function. The predation kernel
\(\phi(w,w_p)\) is set with the <code><a href="https://sizespectrum.org/mizer/reference/setPredKernel.html" class="external-link">mizer::setPredKernel()</a></code> function. The
species interaction matrix \(\theta_{ij}\) is set with <code><a href="https://sizespectrum.org/mizer/reference/setInteraction.html" class="external-link">mizer::setInteraction()</a></code>
and the resource interaction vector \(\theta_{ip}\) is taken from the
<code>interaction_resource</code> column in <code>params@species_params</code>.
\(f(w)\) is the feeding level calculated with
<code><a href="https://sizespectrum.org/mizer/reference/getFeedingLevel.html" class="external-link">mizer::getFeedingLevel()</a></code>. \(\psi(w)\) is the proportion of the available energy
that is invested in reproduction instead of growth, as stored in <code>params@psi</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getDiffusion</span><span class="op">(</span></span>
<span>  <span class="va">params</span>,</span>
<span>  n <span class="op">=</span> <span class="fu">initialN</span><span class="op">(</span><span class="va">params</span><span class="op">)</span>,</span>
<span>  n_pp <span class="op">=</span> <span class="fu">initialNResource</span><span class="op">(</span><span class="va">params</span><span class="op">)</span>,</span>
<span>  n_other <span class="op">=</span> <span class="fu">initialNOther</span><span class="op">(</span><span class="va">params</span><span class="op">)</span>,</span>
<span>  t <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  order <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-params">params<a class="anchor" aria-label="anchor" href="#arg-params"></a></dt>
<dd><p>A MizerParams object</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>A matrix of species abundances (species x size).</p></dd>


<dt id="arg-n-pp">n_pp<a class="anchor" aria-label="anchor" href="#arg-n-pp"></a></dt>
<dd><p>A vector of the resource abundance by size</p></dd>


<dt id="arg-n-other">n_other<a class="anchor" aria-label="anchor" href="#arg-n-other"></a></dt>
<dd><p>A list of abundances for other dynamical components of the
ecosystem</p></dd>


<dt id="arg-t">t<a class="anchor" aria-label="anchor" href="#arg-t"></a></dt>
<dd><p>The time for which to do the calculation (Not used by standard
mizer rate functions but useful for extensions with time-dependent
parameters.)</p></dd>


<dt id="arg-order">order<a class="anchor" aria-label="anchor" href="#arg-order"></a></dt>
<dd><p>By setting this to integer values above 2 one can get the
coefficients of higher-order terms in the expansion of the jump-growth
equation. The default is 2, which gives the diffusion rate.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Unused</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named two dimensional array (predator species x predator size) with
the diffusion rates.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function returns values also for sizes outside the size-range of the
species. These values should not be used, as they are meaningless.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gustav Delius.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

